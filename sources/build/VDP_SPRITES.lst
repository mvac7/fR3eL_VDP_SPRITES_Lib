                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.4.0 #14620 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module VDP_SPRITES
                                      6 	.optsdcc -mz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _SPRITEYBUFF
                                     12 	.globl _SetSpritePattern
                                     13 	.globl _SetSpriteColor
                                     14 	.globl _SetSpritePosition
                                     15 	.globl _SetSpriteVisible
                                     16 	.globl _SetEarlyClock
                                     17 ;--------------------------------------------------------
                                     18 ; special function registers
                                     19 ;--------------------------------------------------------
                                     20 ;--------------------------------------------------------
                                     21 ; ram data
                                     22 ;--------------------------------------------------------
                                     23 	.area _DATA
      000000                         24 _SPRITEYBUFF::
      000000                         25 	.ds 32
                                     26 ;--------------------------------------------------------
                                     27 ; ram data
                                     28 ;--------------------------------------------------------
                                     29 	.area _INITIALIZED
                                     30 ;--------------------------------------------------------
                                     31 ; absolute external ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area _DABS (ABS)
                                     34 ;--------------------------------------------------------
                                     35 ; global & static initialisations
                                     36 ;--------------------------------------------------------
                                     37 	.area _HOME
                                     38 	.area _GSINIT
                                     39 	.area _GSFINAL
                                     40 	.area _GSINIT
                                     41 ;--------------------------------------------------------
                                     42 ; Home
                                     43 ;--------------------------------------------------------
                                     44 	.area _HOME
                                     45 	.area _HOME
                                     46 ;--------------------------------------------------------
                                     47 ; code
                                     48 ;--------------------------------------------------------
                                     49 	.area _CODE
                                     50 ;src\VDP_SPRITES.c:51: void SetSpritePattern(char plane, char pattern) __naked
                                     51 ;	---------------------------------
                                     52 ; Function SetSpritePattern
                                     53 ; ---------------------------------
      000000                         54 _SetSpritePattern::
                                     55 ;src\VDP_SPRITES.c:68: __endasm;
      000000 4D               [ 4]   56 	ld	C,L
      000001 CDr00r00         [17]   57 	call	GetSPRattrVADDR
      000004 23               [ 6]   58 	inc	HL
      000005 23               [ 6]   59 	inc	HL
      000006 59               [ 4]   60 	ld	E,C
      000007 CDr00r00         [17]   61 	call	GetSpritePattern
      00000A C3r00r00         [10]   62 	jp	WriteByteToVRAM
                                     63 ;src\VDP_SPRITES.c:69: }
                                     64 ;src\VDP_SPRITES.c:81: void SetSpriteColor(char plane, char color) __naked
                                     65 ;	---------------------------------
                                     66 ; Function SetSpriteColor
                                     67 ; ---------------------------------
      00000D                         68 _SetSpriteColor::
                                     69 ;src\VDP_SPRITES.c:104: __endasm;
      00000D 4D               [ 4]   70 	ld	C,L
      00000E CDr00r00         [17]   71 	call	GetSPRattrVADDR
      000011 23               [ 6]   72 	inc	HL
      000012 23               [ 6]   73 	inc	HL
      000013 23               [ 6]   74 	inc	HL
      000014 CDr00r00         [17]   75 	call	ReadByteFromVRAM
      000017 CB 7F            [ 8]   76 	bit	7,A
      000019 79               [ 4]   77 	ld	A,C
      00001A CAr00r00         [10]   78 	jp	Z,WriteByteToVRAM
      00001D F6 80            [ 7]   79 	or	#128
      00001F C3r00r00         [10]   80 	jp	WriteByteToVRAM
                                     81 ;src\VDP_SPRITES.c:105: }
                                     82 ;src\VDP_SPRITES.c:118: void SetSpritePosition(char plane, char x, char y)
                                     83 ;	---------------------------------
                                     84 ; Function SetSpritePosition
                                     85 ; ---------------------------------
      000022                         86 _SetSpritePosition::
                                     87 ;src\VDP_SPRITES.c:144: __endasm;
      000022 DD E5            [15]   88 	push	IX
      000024 DD 21 00 00      [14]   89 	ld	IX,#0
      000028 DD 39            [15]   90 	add	IX,SP
      00002A 4D               [ 4]   91 	ld	C,L
      00002B CDr00r00         [17]   92 	call	GetSPRattrVADDR
      00002E DD 7E 04         [19]   93 	ld	A,4(ix)
      000031 CDr00r00         [17]   94 	call	WriteByteToVRAM
      000034 79               [ 4]   95 	ld	A,C
      000035 23               [ 6]   96 	inc	HL
      000036 CDr00r00         [17]   97 	call	WriteByteToVRAM
      000039 DD E1            [14]   98 	pop	IX
                                     99 ;src\VDP_SPRITES.c:145: }
      00003B E1               [10]  100 	pop	hl
      00003C 33               [ 6]  101 	inc	sp
      00003D E9               [ 4]  102 	jp	(hl)
                                    103 ;src\VDP_SPRITES.c:159: void SetSpriteVisible(char plane, char state)
                                    104 ;	---------------------------------
                                    105 ; Function SetSpriteVisible
                                    106 ; ---------------------------------
      00003E                        107 _SetSpriteVisible::
                                    108 ;src\VDP_SPRITES.c:194: __endasm;
      00003E 4D               [ 4]  109 	ld	C,L
      00003F FD 21r00r00      [14]  110 	ld	IY,#_SPRITEYBUFF
      000043 16 00            [ 7]  111 	ld	D,#0
      000045 5F               [ 4]  112 	ld	E,A
      000046 FD 19            [15]  113 	add	IY,DE
      000048 CDr00r00         [17]  114 	call	GetSPRattrVADDR
      00004B 79               [ 4]  115 	ld	A,C
      00004C B7               [ 4]  116 	or	A
      00004D 28 06            [12]  117 	jr	Z,SPRITE_hide
      00004F FD 7E 00         [19]  118 	ld	A,(IY)
      000052 C3r00r00         [10]  119 	jp	WriteByteToVRAM
      000055                        120 SPRITE_hide:
      000055 CDr00r00         [17]  121 	call	ReadByteFromVRAM
      000058 FE D1            [ 7]  122 	cp	#0xD1 ; concealment of the sprite outside the limits of the screen in TMS9918A modes
      00005A C8               [11]  123 	ret	Z
      00005B FD 77 00         [19]  124 	ld	(IY),A
      00005E 3E D1            [ 7]  125 	ld	A,#0xD1 ; concealment of the sprite outside the limits of the screen in TMS9918A modes
      000060 C3r00r00         [10]  126 	jp	WriteByteToVRAM
                                    127 ;src\VDP_SPRITES.c:195: }
      000063 C9               [10]  128 	ret
                                    129 ;src\VDP_SPRITES.c:210: void SetEarlyClock(char plane, char state) __naked
                                    130 ;	---------------------------------
                                    131 ; Function SetEarlyClock
                                    132 ; ---------------------------------
      000064                        133 _SetEarlyClock::
                                    134 ;src\VDP_SPRITES.c:241: __endasm;
      000064 4D               [ 4]  135 	LD	C,L
      000065 CDr00r00         [17]  136 	call	GetSPRattrVADDR
      000068 23               [ 6]  137 	inc	HL
      000069 23               [ 6]  138 	inc	HL
      00006A 23               [ 6]  139 	inc	HL
      00006B CDr00r00         [17]  140 	call	ReadByteFromVRAM
      00006E CB 41            [ 8]  141 	bit	0,C
      000070 28 04            [12]  142 	jr	Z,SPRITE_disable
      000072 F6 80            [ 7]  143 	or	#128
      000074 18 02            [12]  144 	jr	SPRITE_EC_WRVRAM
      000076                        145 SPRITE_disable:
      000076 E6 7F            [ 7]  146 	and	#127
      000078                        147 SPRITE_EC_WRVRAM:
      000078 C3r00r00         [10]  148 	jp	WriteByteToVRAM
                                    149 ;src\VDP_SPRITES.c:242: }
                                    150 	.area _CODE
                                    151 	.area _INITIALIZER
                                    152 	.area _CABS (ABS)
